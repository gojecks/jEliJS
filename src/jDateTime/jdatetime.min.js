!function(){function a(a){return function(b,c){return a.format(a.$dateTime(b))(c)}}function b(a){return function(b){return a.$timeConverter(b).timeago}}function c(a){var b={fullYear:!1,year:(new Date).getFullYear()};return{allowType:"AE",$init:function(c,d,e){var f=jEli.$extend(b,e.$evaluate(d.config));e.calendar=a.buildFullCalendar(f)}}}function d(a,b,c,d){function e(a){return a%4==0?1:0}function f(a,b){var c=[31,e(b)?29:28,31,30,31,30,31,31,30,31,30,31];return c[a]}function g(a,b,d,e){this.monthName=e.flags.MMMM,this.year=e.flags.YYYY,this.weekDays=c,this.weeks=[];for(var f=1,g=1,h=1;h<=Math.ceil((b+a-1)/7);++h){for(var i=[],j=1;j<=7&&!(f>b);++j)g<a?(i.push({date:null,current:!1}),g++):(i.push({date:f,current:f==d}),f++);this.weeks.push(i)}}function h(a){function b(a){return Number(a)<10?parseInt(a):Number(a)}if(jEli.$isString(a)){var c=a.match(/(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)/);if(!jEli.$isNull(c)&&c)return c.shift(),new Date(c[0],c[1]-1,b(c[2]),c[3]||0,c[4]||0,c[5]||0)}return new Date}var i=/D{1,4}|M{1,4}|YY(?:YY)?|([HhMmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;return this.format=function(a){var b=this.$timeConverter(a).flags;return function(a){return String(a).replace(i,function(a){return a in b?b[a]:a.slice(1,a.length-1)})}},this.createCalendar=function(a){var b=this.$timeConverter(a),c=b.flags.YYYY,d=b.flags.M-1,a=(new Date).getDate();c<1e3&&(c+=1900);var e=new Date(c,d,1),h=e.getDay();e=null;var i=f(d,c);return new g(h+1,i,a,b)},this.buildFullCalendar=function(a){var b=[],c=a.fullYear?0:(new Date).getMonth();for(c;c<12;c++)b.push(this.createCalendar(new Date(a.year,c,1).getTime()));return b},this.$dateTime=function(a){var b=!isNaN(Number(a))&&Number(a)?new Date(a):h(a),c=function(a){return(a<10?"0":"")+a},d=c(b.getDate()),e=c(Math.ceil(b.getMonth()+1)),f=b.getFullYear(),g=c(b.getHours()),i=c(b.getMinutes()),j=c(b.getSeconds());return b.current_time=f+"-"+e+"-"+d+" "+g+":"+i+":"+j,b},this.$timeConverter=function(f){jEli.$isUndefined(f)&&(f=this.$dateTime());var g=this.$dateTime(),h=a,i=c,j=f.current_time?f:this.$dateTime(f),k=(j.getDate(),j.getTime()),l=g.getTime(),m=864e5,n={},o=function(a){return(a<10?"0":"")+a};if(isNaN(k)){var p=f.replace(" ","T"),q=f.match(/(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)/),j=(q[1]+"-"+o(q[2]-1)+"-"+q[3]+" "+q[4]+":"+q[5]+":"+q[6],new Date(Date.fromISO(p))),k=j.getTime();g=new Date}var r=Date.UTC(j.getFullYear(),j.getMonth(),j.getDate()),p=Date.UTC(g.getFullYear(),g.getMonth(),g.getDate()),s=Math.floor((p-r)/m),t=s,u=Math.floor(t/7),v=Math.floor(s/30),w=(Math.floor(v/12),k>l),x=w?k-l:l-k,y=Math.floor(x/36e5*3600),z=Math.floor(x/36e5*60),A=Math.floor(x/36e5),B=function(a){return a+(w?" from now":" ago")};n.getTime=function(){return k},n.ctimestamp=r,n.timestamp=p,n.time_difference={seconds:y,minutes:z,hours:A};var C=j.getFullYear(),D=j.getMonth()+1,E=j.getDate(),F=j.getDay(),G=j.current_time.split(" ")[1].split(":"),H=G[0],I=parseInt(G[1]),J=parseInt(G[2]);return n.flags={YYYY:C,YY:String(C).slice(2),M:D,MM:o(D),MMM:a[D-1],MMMM:b[D-1],D:E,DD:o(E),DDD:c[F],DDDD:d[F],h:H%12||12,hh:o(H),H:H,HH:o(H),m:I,mm:o(I),s:J,ss:o(J),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM"},n.isLeapYear=e(C),n.today=i[g.getDay()]+", "+g.getDate()+" "+h[g.getMonth()],g.getFullYear()>j.getFullYear()?n.msgday=h[j.getMonth()]+", "+j.getDate()+" "+j.getFullYear():n.msgday=i[j.getDay()]+", "+j.getDate()+" "+h[j.getMonth()],y<=60?n.timeago=y+B(" seconds"):z<=60?1==z?n.timeago=B("1 minute"):n.timeago=z+B(" minutes"):A<=24?1==A?n.timeago=B("an hour"):n.timeago=A+B(" hours"):t<=7?1==t?n.timeago="Yesterday":n.timeago=s+B(" days"):u<=4?1==u?n.timeago=B("1 week"):n.timeago=u+B(" weeks"):v<=12&&1==v?n.timeago=B("1 month"):n.timeago=n.msgday,n},this}var e,f="jEli.Date.Time";try{e=jEli.jModule(f)}catch(a){e=jEli.jModule(f,[])}e.jValue("dateTimeMonthHalf",new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")).jValue("dateTimeMonthFull",new Array("January","February","March","April","May","June","July","August","September","October","November","December")).jValue("dateTimeDayHalf",new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat")).jValue("dateTimeDayFull",new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday")).jFilter("dateTime",["dateTimeFactory",a]).jFilter("timeAgo",["dateTimeFactory",b]).jFactory("dateTimeFactory",["dateTimeMonthHalf","dateTimeMonthFull","dateTimeDayHalf","dateTimeDayFull",d]).jElement("calendar",["dateTimeFactory",c])}();